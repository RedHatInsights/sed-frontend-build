"use strict";(self.webpackChunksed_frontend=self.webpackChunksed_frontend||[]).push([[103],{73945:(e,n,t)=>{t.d(n,{Z:()=>Z});var r=t(97522),i=t.n(r),c=t(16530),o=t(58740),u=t(4147),a=t(88767),s=t(63038),l=t.n(s),f=t(87757),m=t.n(f),d=t(48926),h=t.n(d),g=function(){var e=h()(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve(window.insights.chrome.getUserPermissions("config-manager")).then((function(e){var n=e.map((function(e){return e.permission}));return{canReadActivationKeys:n.includes("config-manager:activation_keys:read")||n.includes("config-manager:activation_keys:*")}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){try{return window.insights.chrome.auth.getUser()}catch(e){throw new Error("Error authenticating user: ".concat(e.message))}},v=t(28455),p=t(15984);const E=function(e){var n,t,o=e.children,u=(0,a.useQueryClient)(),s=(0,c.useLocation)(),f=(0,a.useQuery)("user",(function(){return Promise.all([y(),g()]).then((function(e){var n,t,r=l()(e,2),i=r[0],c=r[1];return{accountNumber:i.identity.account_number,orgId:null==i||null===(n=i.identity)||void 0===n||null===(t=n.internal)||void 0===t?void 0:t.org_id,rbacPermissions:c}}))})),m=f.isLoading,d=f.isFetching,h=f.isSuccess,E=f.isError;return(0,r.useEffect)((function(){u.invalidateQueries("user")}),[s.pathname]),h&&(null===(n=window.insights)||void 0===n||null===(t=n.chrome)||void 0===t||t.hideGlobalFilter()),!0===E?i().createElement(p.Z,null):!0===m||!0===d?i().createElement(v.Z,null):!0===h?i().createElement(i().Fragment,null,o):void 0};var w=u._j,P=(0,r.lazy)((function(){return Promise.all([t.e(410),t.e(252),t.e(736),t.e(362)]).then(t.bind(t,73911))})),b=(0,r.lazy)((function(){return Promise.all([t.e(410),t.e(252),t.e(736),t.e(734),t.e(157)]).then(t.bind(t,32157))})),k=function(){return i().createElement(r.Suspense,{fallback:i().createElement(o.Bullseye,null,i().createElement(o.Spinner,null))},i().createElement(E,null,i().createElement(c.Switch,null,i().createElement(c.Route,{path:w.activationKeys,component:b}),i().createElement(c.Route,{path:w.connector,component:P}))))},_=t(24685),S=t(83215),C=t(30319),A=new a.QueryClient({defaultOptions:{queries:{retry:3,retryDelay:1e4,staleTime:1/0,refetchOnWindowFocus:!1,refetchOnMount:!1}}});const Z=function(){var e=(0,r.useContext)(C.gE).getRegistry,n=(0,c.useHistory)();return(0,r.useEffect)((function(){e().register({notifications:S.ee})}),[e]),(0,r.useEffect)((function(){insights.chrome.init(),insights.chrome.identifyApp("connector");var e=insights.chrome.on("APP_NAVIGATION",(function(e){return n.push("/".concat(e.navId))}));return function(){e()}}),[]),i().createElement(a.QueryClientProvider,{client:A},i().createElement(_.ZP,null),i().createElement(k,null))}},28455:(e,n,t)=>{t.d(n,{Z:()=>o});var r=t(97522),i=t.n(r),c=t(58740);const o=function(){return i().createElement(c.Bullseye,null,i().createElement(c.Spinner,null))}},30319:(e,n,t)=>{t.d(n,{gE:()=>a,S1:()=>s});var r=t(97522),i=t(67336),c=t(68573),o=t.n(c),u=t(84885),a=(0,r.createContext)({getRegistry:function(){}});function s(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return(0,i.JH)({},[o(),(0,u.ZP)({errorDescriptionKey:["detail","stack"]})].concat(n))}},4147:e=>{e.exports=JSON.parse('{"_j":{"connector":"/","connectSystemsModal":"/connect-systems","logModal":"/log","activationKeys":"/activation-keys"}}')}}]);
//# sourceMappingURL=../sourcemaps/103.75153cc5cceb00304c0a549f402dd3dc.js.map