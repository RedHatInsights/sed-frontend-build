"use strict";(self.webpackChunksed_frontend=self.webpackChunksed_frontend||[]).push([[362],{85226:(e,t,n)=>{n.d(t,{i:()=>d,Z:()=>u});var a=n(58740),r=n(55795),o=n(50470),l=n(97522),c=n.n(l),s=n(10141);const i=function(){return c().createElement(a.FormHelperText,{isHidden:!1,className:"pf-u-mt-sm"},"Click the ",c().createElement(s.ZP,null)," icon on a row to copy the command")},u=function(){return c().createElement(a.FormGroup,{label:c().createElement("span",null,"Register with a username and password ",c().createElement(a.Popover,{position:"right",bodyContent:c().createElement(a.TextContent,null,c().createElement(a.Text,null,"Recommended for users with accounts with Simple Content Access (SCA) enabled. If SCA is not enabled for your account, subscriptions will be auto-attached. ",c().createElement(a.Text,{href:"https://access.redhat.com/articles/simple-content-access",component:"a",target:"_blank",rel:"noopener noreferrer"},"Learn about Simple Content Access ",c().createElement(o.ZP,null))),c().createElement(a.Text,null,"Any credentials of a user with a valid subscription can be used."))},c().createElement(r.ZP,null))),helperText:c().createElement(i,null)},c().createElement(a.ClipboardCopy,null,"rhc connect -u <username> -p <password>"))},d=function(){return c().createElement(a.FormGroup,{label:c().createElement("span",null,"Register with an activation key ",c().createElement(a.Popover,{position:"right",bodyContent:c().createElement(a.TextContent,null,c().createElement(a.Text,null,"Recommended for most users, and accounts who do not have Simple Content Access (SCA) enabled. Activation keys allow systems to be associated with specific subscriptions and service levels."),c().createElement(a.Text,{className:"pf-u-mb-0"},"Activation key: Organization administrators can view, create, and edit activation keys through ",c().createElement(a.Text,{href:"https://access.redhat.com/management/activation_keys",component:"a",target:"_blank",rel:"noopener noreferrer"},"Red Hat Subscription Management ",c().createElement(o.ZP,null)),"on the Customer Portal."),c().createElement(a.Text,null,"Organization ID: The organization ID is a Candlepin-specific identifier, and can be accessed through the Customer Portal on the ",c().createElement(a.Text,{href:"https://access.redhat.com/management/activation_keys",component:"a",target:"_blank",rel:"noopener noreferrer"},"activation keys ",c().createElement(o.ZP,null))," page."))},c().createElement(r.ZP,null))),helperText:c().createElement(i,null)},c().createElement(a.ClipboardCopy,null,"rhc connect -a <activation-key> -o  <organization-id>"))}},73911:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ee});var a=n(87757),r=n.n(a),o=n(48926),l=n.n(o),c=n(63038),s=n.n(c),i=n(58740),u=n(83215),d=n(14748),m=n(80123),p=n(39173),h=n(97522),f=n.n(h),b=n(43476),E=n(16530),g=n(4147),v=n(45697),C=n.n(v),y=n(94962),S=n(1401),O=function(e){var t=e.isOpen,n=void 0!==t&&t,a=e.handleCancel,o=e.handleConfirm,c=e.systemsCount,s=e.data;return f().createElement(i.Modal,{variant:"small",title:"Confirm changes",isOpen:n,onClose:a,actions:[f().createElement(i.Button,{key:"confirm",variant:"primary",type:"button",onClick:o},"Confirm changes"),f().createElement(i.Button,{key:"cancel",variant:"link",type:"button",onClick:a},"Cancel")]},f().createElement(i.TextContent,null,f().createElement(i.Text,{component:"p"},"Your changes applies to"," ",f().createElement("b",null,c," connected ",(0,S._)(c,"system")),". Selected settings will also be applied to ",f().createElement("b",null,"all future systems")," ","that are connect through Red Hat Connect (rhc)."),f().createElement(i.Text,{component:"p",className:"pf-u-mb-sm"},"Upon confirmation, an Ansible Playbook will be pushed to"," ",c," ",(0,S._)(c,"system")," to apply changes.")),f().createElement(i.Button,{variant:"link",onClick:function(){l()(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.dx.getPlaybookPreview({compliance_openscap:s.useOpenSCAP?"enabled":"disabled",insights:s.hasInsights?"enabled":"disabled",remediations:s.enableCloudConnector?"enabled":"disabled"});case 2:t=e.sent,(0,S.S)(t);case 4:case"end":return e.stop()}}),e)})))()}},"View playbook"))};O.propTypes={isOpen:C().bool,handleConfirm:C().func.isRequired,handleCancel:C().func.isRequired,systemsCount:C().number.isRequired,data:C().shape({useOpenSCAP:C().bool,enableCloudConnector:C().bool,hasInsights:C().bool})};const P=O;var w=n(85226),k=function(e){var t=e.handleClose;return f().createElement(i.Alert,{title:f().createElement(i.Title,{headingLevel:"h2",size:"xl"},"Red Hat connector (RHC)"),actionClose:f().createElement(i.AlertActionCloseButton,{onClick:t}),isInline:!0,customIcon:f().createElement(h.Fragment,null),className:"pf-u-mb-lg"},f().createElement(i.TextContent,null,f().createElement(i.Text,null,"Red Hat connector allows you to register with Red Hat Subscription Management (RHSM), connect to Red Hat Insights, and manage your Insights connections with one command."),f().createElement(i.Text,null,"Red Hat connector connects RHEL 7.9+ and 8.4+ systems. To register other systems with RHSM or Insights, check out the ",f().createElement("a",{target:"_blank",rel:"noreferer noopener",href:"./insights/registration"},"Registration Assistant"),"."),f().createElement(i.Form,{onSubmit:function(e){return e.preventDefault()}},f().createElement(i.Grid,{hasGutter:!0},f().createElement(i.GridItem,{sm:12,md:6,lg:4},f().createElement(w.i,null)),f().createElement(i.GridItem,{sm:12,md:6,lg:4},f().createElement(w.Z,null))))))};k.propTypes={handleClose:C().func.isRequired};const R=k;n(5190);var I=g._j,T=function(e){var t=e.setMadeChanges,n=e.defaults,a=e.onChange,r=e.madeChanges,o=e.setConfirmChangesOpen,l=(0,E.useHistory)().push,c=(0,b.useSelector)((function(e){var t=e.connectedSystemsReducer;return{systemsLoaded:null==t?void 0:t.loaded}}),b.shallowEqual).systemsLoaded,u=(0,h.useState)(n.hasInsights||n.useOpenSCAP||n.enableCloudConnector),d=s()(u,2),m=d[0],p=d[1],g=(0,h.useState)(n.useOpenSCAP),v=s()(g,2),C=v[0],y=v[1],S=(0,h.useState)(n.enableCloudConnector),O=s()(S,2),P=O[0],w=O[1];return(0,h.useEffect)((function(){t(m!==n.hasInsights||C!==n.useOpenSCAP||P!=n.enableCloudConnector),a({useOpenSCAP:C,enableCloudConnector:P})}),[C,P,m]),f().createElement(i.Stack,{hasGutter:!0,className:"pf-u-p-md"},f().createElement(i.StackItem,null,f().createElement(i.Level,null,f().createElement(i.LevelItem,null,f().createElement(i.Title,{headingLevel:"h2",size:"2xl"},"Red Hat Insights")),f().createElement(i.LevelItem,null,f().createElement(i.Button,{ouiaId:"primary-save-button",isDisabled:!c||!r,onClick:function(){return o(!0)}},"Save changes"),f().createElement(i.Button,{onClick:function(){return l(I.logModal)},variant:"link"},"View log"))),f().createElement(i.TextContent,{className:"pf-u-mt-md"},f().createElement(i.Text,{component:"p"},"Red Hat Insights is a proactive operational efficiency and security risk management solution in Red Hat Enterprise Linux (RHEL) subscriptions for versions 6.4 and higher, as well as public cloud versions of RHEL. It helps identify, prioritize, and resolve risks to security, compliance, performance, availability, and stability before they become urgent issues. Insights also enables users to monitor for adherence to internal policies and understand configuration changes over time."))),f().createElement(i.StackItem,null,f().createElement(i.Title,{headingLevel:"h3",size:"xl"},"Settings"),f().createElement(i.Stack,{hasGutter:!0,className:"pf-u-mt-lg"},f().createElement(i.StackItem,null,f().createElement(i.Switch,{id:"connect-to-insights",ouiaId:"connect-to-insights","aria-label":"Connect to Red Hat Insights",isChecked:m,onChange:function(){var e=!m;p((function(){return e})),e||(y((function(){return!1})),w((function(){return!1})))},label:f().createElement(h.Fragment,null,f().createElement(i.Title,{headingLevel:"h4",size:"md"},"Connect to Red Hat Insights"),f().createElement(i.TextContent,null,f().createElement(i.Text,{component:"small"},"Required to use Insights applications. Enables Advisor, Drift, Patch, Vulnerability and Policies applications.")))}),f().createElement("div",{className:"pf-u-pl-3xl"},f().createElement(i.Stack,null,f().createElement(i.StackItem,null,f().createElement(i.Switch,{className:"pf-u-mt-md",key:"use-openscap",id:"use-openscap",ouiaId:"use-openscap","aria-label":"Use OpenSCAP for Compliance policies",isChecked:C,onChange:function(){y((function(e){var t=!e;return p((function(){return!0})),t}))},label:f().createElement(h.Fragment,null,f().createElement(i.Title,{headingLevel:"h4",size:"md"},"Use OpenSCAP for Compliance policies"),f().createElement(i.TextContent,null,f().createElement(i.Text,{component:"small"},"Required to use Compliance application")))})),f().createElement(i.StackItem,null,f().createElement(i.Switch,{className:"pf-u-mt-md",key:"enable-cloud-connector",id:"enable-cloud-connector",ouiaId:"enable-cloud-connector","aria-label":"Enable Cloud Connector",isChecked:P,onChange:function(){w((function(e){var t=!e;return t&&p((function(){return!0})),t}))},label:f().createElement(h.Fragment,null,f().createElement(i.Title,{headingLevel:"h4",size:"md"},"Enable Cloud Connector to fix issues directly from Insights"),f().createElement(i.TextContent,null,f().createElement(i.Text,{component:"small"},"Cloud Connector allows you to push Remediation Ansible Playbooks directly from Insights to your systems.")))}))))))))};T.propTypes={setMadeChanges:C().func.isRequired,defaults:C().shape({useOpenSCAP:C().bool,hasInsights:C().bool,enableCloudConnector:C().bool}),onChange:C().func.isRequired,madeChanges:C().bool,setConfirmChangesOpen:C().func.isRequired},T.defaultProps={defaults:{useOpenSCAP:!1,hasInsights:!1,enableCloudConnector:!1}};const x=T;var _,j=n(30319),A=n(94778),L=n(59713),D=n.n(L),H=n(18546),N=n(49120);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){D()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const z=(0,H.Gg)((_={},D()(_,"".concat(N.o9,"_PENDING"),(function(e){return F(F({},e),{},{loaded:!1})})),D()(_,"".concat(N.o9,"_FULFILLED"),(function(e,t){var n=t.payload;return F(F({},e),{},{loaded:!0,hosts:(null==n?void 0:n.results)||[],total:(null==n?void 0:n.count)||0,page:(null==n?void 0:n.page)||0,perPage:(null==n?void 0:n.per_page)||0})})),D()(_,"".concat(N.o9,"_ERROR"),(function(){return{error:!0}})),_),{loaded:!1,values:{}});var Z;function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){D()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=function(e){return B(B({},e),{},{loaded:!1})},U=function(e,t){var n,a,r,o=t.payload;return B(B({},e),{},{loaded:!0,values:{useOpenSCAP:"enabled"===(null==o||null===(n=o.state)||void 0===n?void 0:n.compliance_openscap),enableCloudConnector:"enabled"===(null==o||null===(a=o.state)||void 0===a?void 0:a.remediations),hasInsights:"enabled"===(null==o||null===(r=o.state)||void 0===r?void 0:r.insights)}})};const K=(0,H.Gg)((Z={},D()(Z,"".concat(N.If,"_PENDING"),M),D()(Z,"".concat(N.K8,"_PENDING"),M),D()(Z,"".concat(N.K8,"_FULFILLED"),U),D()(Z,"".concat(N.If,"_FULFILLED"),U),D()(Z,"".concat(N.K8,"_ERROR"),(function(){return{error:!0}})),Z),{loaded:!1,values:{}});var V;function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){D()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const $=(0,H.Gg)((V={},D()(V,"".concat(N.tj,"_PENDING"),(function(e){return Y(Y({},e),{},{loaded:!1})})),D()(V,"".concat(N.tj,"_FULFILLED"),(function(e,t){var n=t.payload;return Y(Y({},e),{},{loaded:!0},n||{})})),D()(V,"".concat(N.tj,"_ERROR"),(function(){return{error:!0}})),V),{loaded:!1,results:[]});var J=g._j,W=(0,h.lazy)((function(){return n.e(245).then(n.bind(n,65170))})),X=(0,h.lazy)((function(){return Promise.all([n.e(410),n.e(252),n.e(736),n.e(734),n.e(239)]).then(n.bind(n,34003))}));const ee=function(){var e=(0,E.useHistory)(),t=(0,h.useContext)(j.gE).getRegistry,n=(0,h.useState)("services"),a=s()(n,2),o=a[0],c=a[1],g=(0,h.useState)(!1),v=s()(g,2),C=v[0],y=v[1],S=(0,h.useState)(!0),O=s()(S,2),w=O[0],k=O[1],I=(0,h.useState)(!1),T=s()(I,2),_=T[0],L=T[1],D=(0,h.useRef)(),H=(0,b.useDispatch)(),N=(0,b.useSelector)((function(e){var t=e.activeStateReducer;return null==t?void 0:t.loaded})),G=(0,b.useSelector)((function(e){var t,n,a,r=e.activeStateReducer;return{useOpenSCAP:null==r||null===(t=r.values)||void 0===t?void 0:t.useOpenSCAP,enableCloudConnector:null==r||null===(n=r.values)||void 0===n?void 0:n.enableCloudConnector,hasInsights:null==r||null===(a=r.values)||void 0===a?void 0:a.hasInsights}}),b.shallowEqual),F=G.useOpenSCAP,Z=G.enableCloudConnector,q=G.hasInsights,B=(0,b.useSelector)((function(e){var t=e.connectedSystemsReducer;return{systemsLoaded:null==t?void 0:t.loaded,systemsCount:null==t?void 0:t.total}}),b.shallowEqual),M=B.systemsLoaded,U=B.systemsCount;return(0,h.useEffect)((function(){t().register({activeStateReducer:K,logReducer:$,connectedSystemsReducer:z}),H((0,A.Qe)()),H((0,A.j$)())}),[t]),(0,h.useEffect)((function(){var e,t,n;null===(e=insights)||void 0===e||null===(t=e.chrome)||void 0===t||null===(n=t.appAction)||void 0===n||n.call(t,"cloud-connector-dashboard")}),[]),f().createElement(f().Fragment,null,f().createElement(E.Route,{exact:!0,path:J.connectSystemsModal,render:function(){return f().createElement(h.Suspense,{fallback:f().createElement(i.Bullseye,null,f().createElement(i.Spinner,null))},f().createElement(W,null))}}),f().createElement(E.Route,{exact:!0,path:J.logModal,render:function(){return f().createElement(h.Suspense,{fallback:f().createElement(i.Bullseye,null,f().createElement(i.Spinner,null))},f().createElement(X,null))}}),f().createElement(m.Z,null,f().createElement(p.Z,{title:f().createElement(i.Split,{hasGutter:!0},f().createElement(i.SplitItem,{isFilled:!0},"Red Hat connector Dashboard"),f().createElement(i.SplitItem,null,f().createElement(i.Button,{variant:"primary",onClick:function(){return e.push(J.connectSystemsModal)}},"Connect systems")),f().createElement(i.SplitItem,null,f().createElement(i.Button,{variant:"link"},f().createElement("a",{href:"./insights/inventory"},"View systems in Inventory"))))})),f().createElement(d.Z,null,f().createElement(h.Fragment,null,M&&0===U&&w&&f().createElement(R,{handleClose:function(){return k(!1)}})),f().createElement("div",{className:"dashboard__content"},f().createElement(i.Tabs,{activeKey:o,onSelect:function(e,t){return c(t)}},f().createElement(i.Tab,{title:f().createElement(i.TabTitleText,null,"Services"),eventKey:"services"},N||void 0!==F&&void 0!==Z?f().createElement(x,{madeChanges:_,setConfirmChangesOpen:y,setMadeChanges:L,defaults:{useOpenSCAP:F,enableCloudConnector:Z,hasInsights:q},onChange:function(e){D.current=e}}):f().createElement(i.Bullseye,null,f().createElement(i.Spinner,{className:"pf-u-p-lg",size:"xl"})))))),f().createElement(P,{isOpen:C,handleCancel:function(){return y(!1)},systemsCount:U,data:D.current,handleConfirm:function(){y(!1),l()(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,A.mt)(D.current),H(t),e.next=4,t.payload;case 4:H((0,u.wN)({variant:"success",title:"Changes saved",description:"Your service enablement changes were applied to connected systems"})),L(!1);case 6:case"end":return e.stop()}}),e)})))()}}))}},94962:(e,t,n)=>{n.d(t,{dx:()=>l,TQ:()=>o,ok:()=>c});var a=n(77460),r=n(91571),o=function(){return a.ZP.get("".concat("/api/inventory/v1","/hosts?filter[system_profile][rhc_client_id]=not_nil&fields[system_profile]=rhc_client_id,rhc_config_state&staleness=fresh&staleness=stale&&registered_with=insights"))},l=new r.DefaultApi(void 0,"/api/config-manager/v1",a.ZP),c=function(e){var t=e.useOpenSCAP,n=e.enableCloudConnector,a=e.hasInsights;return l.updateStates({compliance_openscap:t?"enabled":"disabled",insights:t||n||a?"enabled":"disabled",remediations:n?"enabled":"disabled"})}},49120:(e,t,n)=>{n.d(t,{K8:()=>a,If:()=>r,tj:()=>o,o9:()=>l});var a="GET_CURR_STATE",r="SET_CURR_STATE",o="GET_LOG",l="GET_CONNECTED_HOSTS"},94778:(e,t,n)=>{n.d(t,{Qe:()=>o,mt:()=>l,VU:()=>c,j$:()=>s});var a=n(94962),r=n(49120),o=function(){return{type:r.K8,payload:a.dx.getCurrentState()}},l=function(e){return{type:r.If,payload:(0,a.ok)(e)}},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.perPage,n=void 0===t?50:t,o=e.page,l=void 0===o?1:o;return{type:r.tj,payload:a.dx.getStates(n,(l-1)*n)}},s=function(){return{type:r.o9,payload:(0,a.TQ)()}}},1401:(e,t,n)=>{n.d(t,{_:()=>a,S:()=>r});var a=function(e,t,n){return e>1?n||t+"s":t},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"".concat((new Date).toISOString()),n="data:text/plain;charset=utf-8,",a=new Blob([e],{type:n}),r=document.createElement("a");r.setAttribute("href",URL.createObjectURL(a)),r.setAttribute("download","".concat(t,".yml")),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)}}}]);
//# sourceMappingURL=../sourcemaps/Dashboard.0bfcd08bfc6d87ef2b3810d41ffb3576.js.map