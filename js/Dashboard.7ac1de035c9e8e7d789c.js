"use strict";(self.webpackChunksed_frontend=self.webpackChunksed_frontend||[]).push([[362],{85226:(e,t,n)=>{n.d(t,{i:()=>u,Z:()=>i});var a=n(58740),l=n(55795),r=n(97522),o=n.n(r),c=n(10141);const s=function(){return o().createElement(a.FormHelperText,{isHidden:!1,className:"pf-u-mt-sm"},"Click the ",o().createElement(c.ZP,null)," icon on a row to copy the command with your values")},i=function(){return o().createElement(a.FormGroup,{label:o().createElement("span",null,"Register with a username and password ",o().createElement(a.Tooltip,{position:"right",content:o().createElement(a.Stack,{hasGutter:!0},o().createElement(a.StackItem,null,"Recommended for accounts with Simple Content Access enable"),o().createElement(a.StackItem,null,"Systems can be registered using the username and password of a user on an account with valid subscription. Systems will be registered trough Simple Content Access (SCA) or if SCA is not enabled, subscriptions will be auto-attached."))},o().createElement(l.ZP,null))),helperText:o().createElement(s,null)},o().createElement(a.ClipboardCopy,null,"rhc connect -u <username> -p <password>"))},u=function(){return o().createElement(a.FormGroup,{label:o().createElement("span",null,"Register with an activation key ",o().createElement(a.Tooltip,{position:"right",content:o().createElement(a.Stack,{hasGutter:!0},o().createElement(a.StackItem,null,"Recommended for accounts without Simple Content Access enable"),o().createElement(a.StackItem,null,'Systems can be registered using an actication key & the organiztaion ID. Using activation keys allows systems to be associated to specific subscriptions. Activation keys can be viewed on the "Activation keys" tab of the Red Hat connector UI or on the customer portal.'))},o().createElement(l.ZP,null))),helperText:o().createElement(s,null)},o().createElement(a.ClipboardCopy,null,"rhc connect -a <activation-key> -o  <organization-id>"))}},45139:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ae});var a=n(87757),l=n.n(a),r=n(48926),o=n.n(r),c=n(63038),s=n.n(c),i=n(97522),u=n.n(i),d=n(58740),m=n(18802),p=n(86350),h=n(48716),f=n(39173),E=n(45697),b=n.n(E),g=n(94962),v=n(1401),y=function(e){var t=e.isOpen,n=void 0!==t&&t,a=e.handleCancel,r=e.handleConfirm,c=e.systemsCount,s=e.data;return u().createElement(d.Modal,{variant:"small",title:"Confirm changes",isOpen:n,onClose:a,actions:[u().createElement(d.Button,{key:"confirm",variant:"primary",type:"button",onClick:r},"Confirm changes"),u().createElement(d.Button,{key:"cancel",variant:"link",type:"button",onClick:a},"Cancel")]},u().createElement(d.TextContent,null,u().createElement(d.Text,{component:"p"},"Your changes applies to"," ",u().createElement("b",null,c," connected ",(0,v._)(c,"system")),". Selected settings will also be applied to ",u().createElement("b",null,"all future systems")," ","that are connect through Red Hat Connect (rhc)."),u().createElement(d.Text,{component:"p",className:"pf-u-mb-sm"},"Upon confirmation, an Ansible Playbook will be pushed to"," ",c," ",(0,v._)(c,"system")," to apply changes.")),u().createElement(d.Button,{variant:"link",onClick:function(){o()(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.dx.getPlaybookPreview({compliance_openscap:s.useOpenSCAP?"enabled":"disabled",insights:s.hasInsights?"enabled":"disabled",remediations:s.enableCloudConnector?"enabled":"disabled"});case 2:t=e.sent,(0,v.S)(t);case 4:case"end":return e.stop()}}),e)})))()}},"View playbook"))};y.propTypes={isOpen:b().bool,handleConfirm:b().func.isRequired,handleCancel:b().func.isRequired,systemsCount:b().number.isRequired,data:b().shape({useOpenSCAP:b().bool,enableCloudConnector:b().bool,hasInsights:b().bool})};const C=y;var S,O=n(43476),k=n(83215),w=n(59713),I=n.n(w),P=n(18546),R=n(49120);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){I()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(e){return _(_({},e),{},{loaded:!1})},j=function(e,t){var n,a,l,r=t.payload;return _(_({},e),{},{loaded:!0,values:{useOpenSCAP:"enabled"===(null==r||null===(n=r.state)||void 0===n?void 0:n.compliance_openscap),enableCloudConnector:"enabled"===(null==r||null===(a=r.state)||void 0===a?void 0:a.remediations),hasInsights:"enabled"===(null==r||null===(l=r.state)||void 0===l?void 0:l.insights)}})};const L=(0,P.Gg)((S={},I()(S,"".concat(R.If,"_PENDING"),x),I()(S,"".concat(R.K8,"_PENDING"),x),I()(S,"".concat(R.K8,"_FULFILLED"),j),I()(S,"".concat(R.If,"_FULFILLED"),j),I()(S,"".concat(R.K8,"_ERROR"),(function(){return{error:!0}})),S),{loaded:!1,values:{}});var A;function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){I()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const H=(0,P.Gg)((A={},I()(A,"".concat(R.tj,"_PENDING"),(function(e){return N(N({},e),{},{loaded:!1})})),I()(A,"".concat(R.tj,"_FULFILLED"),(function(e,t){var n=t.payload;return N(N({},e),{},{loaded:!0},n||{})})),I()(A,"".concat(R.tj,"_ERROR"),(function(){return{error:!0}})),A),{loaded:!1,results:[]});var G;function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){I()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const U=(0,P.Gg)((G={},I()(G,"".concat(R.o9,"_PENDING"),(function(e){return z(z({},e),{},{loaded:!1})})),I()(G,"".concat(R.o9,"_FULFILLED"),(function(e,t){var n=t.payload;return z(z({},e),{},{loaded:!0,hosts:(null==n?void 0:n.results)||[],total:(null==n?void 0:n.count)||0,page:(null==n?void 0:n.page)||0,perPage:(null==n?void 0:n.per_page)||0})})),I()(G,"".concat(R.o9,"_ERROR"),(function(){return{error:!0}})),G),{loaded:!1,values:{}});var B=n(94778),q=n(16530),Z=n(4147),K=n(85226),M=function(e){var t=e.handleClose;return u().createElement(d.Alert,{title:u().createElement(d.Title,{headingLevel:"h2",size:"xl"},"Red Hat connector (RHC)"),actionClose:u().createElement(d.AlertActionCloseButton,{onClick:t}),isInline:!0,customIcon:u().createElement(i.Fragment,null),className:"pf-u-mb-lg"},u().createElement(d.TextContent,null,u().createElement(d.Text,null,"Red Hat connector allows you to connect your systems to Red Hat with one command."),u().createElement(d.Text,null,"Systems will be automatically set up to use the services turned on in the dashboard below."),u().createElement(d.Text,null,"Red Hat connector is for RHEL 8.4 systems and newer."),u().createElement(d.Text,null,"To register other RHEL systems, check out the ",u().createElement("a",{target:"_blank",rel:"noreferer noopener",href:"./insights/registration"},"Registration Assistant"),"."),u().createElement(d.Form,{onSubmit:function(e){return e.preventDefault()}},u().createElement(d.Grid,{hasGutter:!0},u().createElement(d.GridItem,{sm:12,md:6,lg:4},u().createElement(K.i,null)),u().createElement(d.GridItem,{sm:12,md:6,lg:4},u().createElement(K.Z,null))))))};M.propTypes={handleClose:b().func.isRequired};const V=M;var Q=n(75663);const Y=function(){return u().createElement(d.Bullseye,null,u().createElement(d.EmptyState,null,u().createElement(d.EmptyStateIcon,{icon:Q.ZP}),u().createElement(d.Title,{headingLevel:"h4",size:"lg"},"This feature is not currently supported"),u().createElement(d.Button,{component:"a",variant:"link",href:"https://access.redhat.com/articles/simple-content-access",target:"_blank",rel:"noreferrer noopener"},"Customer portal")))};n(5190);var $=Z._j,J=function(e){var t=e.setMadeChanges,n=e.defaults,a=e.onChange,l=e.madeChanges,r=e.setConfirmChangesOpen,o=(0,q.useHistory)().push,c=(0,O.useSelector)((function(e){var t=e.connectedSystemsReducer;return{systemsLoaded:null==t?void 0:t.loaded}}),O.shallowEqual).systemsLoaded,m=(0,i.useState)(n.hasInsights||n.useOpenSCAP||n.enableCloudConnector),p=s()(m,2),h=p[0],f=p[1],E=(0,i.useState)(n.useOpenSCAP),b=s()(E,2),g=b[0],v=b[1],y=(0,i.useState)(n.enableCloudConnector),C=s()(y,2),S=C[0],k=C[1];return(0,i.useEffect)((function(){t(h!==n.hasInsights||g!==n.useOpenSCAP||S!=n.enableCloudConnector),a({useOpenSCAP:g,enableCloudConnector:S})}),[g,S,h]),u().createElement(d.Stack,{hasGutter:!0,className:"pf-u-p-md"},u().createElement(d.StackItem,null,u().createElement(d.Level,null,u().createElement(d.LevelItem,null,u().createElement(d.Title,{headingLevel:"h2",size:"2xl"},"Red Hat Insights")),u().createElement(d.LevelItem,null,u().createElement(d.Button,{ouiaId:"primary-save-button",isDisabled:!c||!l,onClick:function(){return r(!0)}},"Save changes"),u().createElement(d.Button,{onClick:function(){return o($.logModal)},variant:"link"},"View log"))),u().createElement(d.TextContent,{className:"pf-u-mt-md"},u().createElement(d.Text,{component:"p"},"Red Hat Insights is a proactive operational efficiency and security risk management solution in Red Hat Enterprise Linux (RHEL) subscriptions for versions 6.4 and higher, as well as public cloud versions of RHEL. It helps identify, prioritize, and resolve risks to security, compliance, performance, availability, and stability before they become urgent issues. Insights also enables users to monitor for adherence to internal policies and understand configuration changes over time."))),u().createElement(d.StackItem,null,u().createElement(d.Title,{headingLevel:"h3",size:"xl"},"Settings"),u().createElement(d.Stack,{hasGutter:!0,className:"pf-u-mt-lg"},u().createElement(d.StackItem,null,u().createElement(d.Switch,{id:"connect-to-insights",ouiaId:"connect-to-insights","aria-label":"Connect to Red Hat Insights",isChecked:h,onChange:function(){var e=!h;f((function(){return e})),e||(v((function(){return!1})),k((function(){return!1})))},label:u().createElement(i.Fragment,null,u().createElement(d.Title,{headingLevel:"h4",size:"md"},"Connect to Red Hat Insights"),u().createElement(d.TextContent,null,u().createElement(d.Text,{component:"small"},"Required to use Insights applications. Enables Advisor, Drift, Patch, Vulnerability and Policies applications.")))}),u().createElement("div",{className:"pf-u-pl-3xl"},u().createElement(d.Stack,null,u().createElement(d.StackItem,null,u().createElement(d.Switch,{className:"pf-u-mt-md",key:"use-openscap",id:"use-openscap",ouiaId:"use-openscap","aria-label":"Use OpenSCAP for Compliance policies",isChecked:g,onChange:function(){v((function(e){var t=!e;return f((function(){return!0})),t}))},label:u().createElement(i.Fragment,null,u().createElement(d.Title,{headingLevel:"h4",size:"md"},"Use OpenSCAP for Compliance policies"),u().createElement(d.TextContent,null,u().createElement(d.Text,{component:"small"},"Required to use Compliance application")))})),u().createElement(d.StackItem,null,u().createElement(d.Switch,{className:"pf-u-mt-md",key:"enable-cloud-connector",id:"enable-cloud-connector",ouiaId:"enable-cloud-connector","aria-label":"Enable Cloud Connector",isChecked:S,onChange:function(){k((function(e){var t=!e;return t&&f((function(){return!0})),t}))},label:u().createElement(i.Fragment,null,u().createElement(d.Title,{headingLevel:"h4",size:"md"},"Enable Cloud Connector to fix issues directly from Insights"),u().createElement(d.TextContent,null,u().createElement(d.Text,{component:"small"},"Cloud Connector allows you to push Remediation Ansible Playbooks directly from Insights to your systems.")))}))))))))};J.propTypes={setMadeChanges:b().func.isRequired,defaults:b().shape({useOpenSCAP:b().bool,hasInsights:b().bool,enableCloudConnector:b().bool}),onChange:b().func.isRequired,madeChanges:b().bool,setConfirmChangesOpen:b().func.isRequired},J.defaultProps={defaults:{useOpenSCAP:!1,hasInsights:!1,enableCloudConnector:!1}};const W=J;var X=n(30319),ee=Z._j,te=(0,i.lazy)((function(){return n.e(245).then(n.bind(n,65170))})),ne=(0,i.lazy)((function(){return Promise.all([n.e(410),n.e(252),n.e(736),n.e(239)]).then(n.bind(n,34003))}));const ae=function(){var e=(0,q.useHistory)(),t=(0,i.useContext)(X.gE).getRegistry,n=(0,i.useState)("services"),a=s()(n,2),r=a[0],c=a[1],E=(0,i.useState)(!1),b=s()(E,2),g=b[0],v=b[1],y=(0,i.useState)(!0),S=s()(y,2),w=S[0],I=S[1],P=(0,i.useState)(!1),R=s()(P,2),T=R[0],_=R[1],x=(0,i.useRef)(),j=(0,O.useDispatch)(),A=(0,O.useSelector)((function(e){var t=e.activeStateReducer;return null==t?void 0:t.loaded})),D=(0,O.useSelector)((function(e){var t,n,a,l=e.activeStateReducer;return{useOpenSCAP:null==l||null===(t=l.values)||void 0===t?void 0:t.useOpenSCAP,enableCloudConnector:null==l||null===(n=l.values)||void 0===n?void 0:n.enableCloudConnector,hasInsights:null==l||null===(a=l.values)||void 0===a?void 0:a.hasInsights}}),O.shallowEqual),N=D.useOpenSCAP,G=D.enableCloudConnector,F=D.hasInsights,z=(0,O.useSelector)((function(e){var t=e.connectedSystemsReducer;return{systemsLoaded:null==t?void 0:t.loaded,systemsCount:null==t?void 0:t.total}}),O.shallowEqual),Z=z.systemsLoaded,K=z.systemsCount;return(0,i.useEffect)((function(){t().register({activeStateReducer:L,logReducer:H,connectedSystemsReducer:U}),j((0,B.Qe)()),j((0,B.j$)())}),[t]),(0,i.useEffect)((function(){var e,t,n;null===(e=insights)||void 0===e||null===(t=e.chrome)||void 0===t||null===(n=t.appAction)||void 0===n||n.call(t,"cloud-connector-dashboard")}),[]),u().createElement(u().Fragment,null,u().createElement(q.Route,{exact:!0,path:ee.connectSystemsModal,render:function(){return u().createElement(i.Suspense,{fallback:u().createElement(d.Bullseye,null,u().createElement(d.Spinner,null))},u().createElement(te,null))}}),u().createElement(q.Route,{exact:!0,path:ee.logModal,render:function(){return u().createElement(i.Suspense,{fallback:u().createElement(d.Bullseye,null,u().createElement(d.Spinner,null))},u().createElement(ne,null))}}),u().createElement(h.Z,null,u().createElement(f.Z,{title:u().createElement(d.Split,{hasGutter:!0},u().createElement(d.SplitItem,null,"Red Hat connector Dashboard"),u().createElement(d.SplitItem,{isFilled:!0},u().createElement(d.Label,{color:"cyan"},"Tech preview")),u().createElement(d.SplitItem,null,u().createElement(d.Button,{variant:"primary",onClick:function(){return e.push(ee.connectSystemsModal)}},"Connect systems")))})),u().createElement(p.Z,null,u().createElement(i.Fragment,null,Z&&0===K&&w&&u().createElement(V,{handleClose:function(){return I(!1)}})),u().createElement("div",{className:"dashboard__content"},u().createElement(d.Stack,{className:"pf-u-p-md"},u().createElement(d.StackItem,null,u().createElement(d.Level,null,u().createElement(d.LevelItem,null,u().createElement(d.Title,{headingLevel:"h3",size:"md"},"Systems connected with Red Hat connector"),u().createElement(d.Flex,{alignContent:{default:"alignContentCenter"},alignItems:{default:"alignItemsCenter"}},Z?u().createElement(d.Title,{headingLevel:"h3",size:"2xl"},K):u().createElement(d.Skeleton,{width:"33%"}),!A&&void 0!==N&&void 0!==G&&u().createElement(d.Text,{className:"dashboard__in-progress-text",component:"small"},u().createElement(m.ZP,null)," Changes being applied")),u().createElement("a",{href:"./insights/inventory"},"View in Inventory"))))),u().createElement(d.Tabs,{activeKey:r,onSelect:function(e,t){return c(t)}},u().createElement(d.Tab,{title:u().createElement(d.TabTitleText,null,"Services"),eventKey:"services"},A||void 0!==N&&void 0!==G?u().createElement(W,{madeChanges:T,setConfirmChangesOpen:v,setMadeChanges:_,defaults:{useOpenSCAP:N,enableCloudConnector:G,hasInsights:F},onChange:function(e){x.current=e}}):u().createElement(d.Bullseye,null,u().createElement(d.Spinner,{className:"pf-u-p-lg",size:"xl"}))),u().createElement(d.Tab,{eventKey:"activation-keys",title:u().createElement(d.TabTitleText,null,"Activation keys")},u().createElement("div",{className:"pf-u-m-md"},u().createElement(Y,null)))))),u().createElement(C,{isOpen:g,handleCancel:function(){return v(!1)},systemsCount:K,data:x.current,handleConfirm:function(){v(!1),o()(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,B.mt)(x.current),j(t),e.next=4,t.payload;case 4:j((0,k.wN)({variant:"success",title:"Changes saved",description:"Your service enablement changes were applied to connected systems"})),_(!1);case 6:case"end":return e.stop()}}),e)})))()}}))}},94962:(e,t,n)=>{n.d(t,{dx:()=>o,TQ:()=>r,ok:()=>c});var a=n(77460),l=n(91571),r=function(){return a.ZP.get("".concat("/api/inventory/v1","/hosts?filter[system_profile][rhc_client_id]=not_nil&fields[system_profile]=rhc_client_id,rhc_config_state&staleness=fresh&staleness=stale&&registered_with=insights"))},o=new l.DefaultApi(void 0,"/api/config-manager/v1",a.ZP),c=function(e){var t=e.useOpenSCAP,n=e.enableCloudConnector,a=e.hasInsights;return o.updateStates({compliance_openscap:t?"enabled":"disabled",insights:t||n||a?"enabled":"disabled",remediations:n?"enabled":"disabled"})}},49120:(e,t,n)=>{n.d(t,{K8:()=>a,If:()=>l,tj:()=>r,o9:()=>o});var a="GET_CURR_STATE",l="SET_CURR_STATE",r="GET_LOG",o="GET_CONNECTED_HOSTS"},94778:(e,t,n)=>{n.d(t,{Qe:()=>r,mt:()=>o,VU:()=>c,j$:()=>s});var a=n(94962),l=n(49120),r=function(){return{type:l.K8,payload:a.dx.getCurrentState()}},o=function(e){return{type:l.If,payload:(0,a.ok)(e)}},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.perPage,n=void 0===t?50:t,r=e.page,o=void 0===r?1:r;return{type:l.tj,payload:a.dx.getStates(n,(o-1)*n)}},s=function(){return{type:l.o9,payload:(0,a.TQ)()}}},1401:(e,t,n)=>{n.d(t,{_:()=>a,S:()=>l});var a=function(e,t,n){return e>1?n||t+"s":t},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"".concat((new Date).toISOString()),n="data:text/plain;charset=utf-8,",a=new Blob([e],{type:n}),l=document.createElement("a");l.setAttribute("href",URL.createObjectURL(a)),l.setAttribute("download","".concat(t,".yml")),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)}}}]);
//# sourceMappingURL=../sourcemaps/Dashboard.cf828704128def4ba2147dc5a09d8cbf.js.map