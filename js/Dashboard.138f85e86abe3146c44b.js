(self.webpackChunksed_frontend=self.webpackChunksed_frontend||[]).push([[362],{92917:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var a=n(94015),o=n.n(a),r=n(23645),l=n.n(r)()(o());l.push([e.id,".connector .dashboard__content{min-height:100%;background-color:var(--pf-global--BackgroundColor--100)}.connector .dashboard__header{display:flex;align-items:end}.connector .dashboard__success-status{color:var(--pf-global--success-color--100)}.connector .dashboard__navtab-title{width:100%}.connector .dashboard__tabs-content{display:flex}.connector .dashboard__tabs-nav{flex-shrink:0}.connector .dashboard__in-progress-text{color:var(--pf-global--palette--blue-500)}.connector .dashboard__in-progress-text>svg{color:initial}\n","",{version:3,sources:["webpack://./src/Routes/Dashboard/dashboard.scss"],names:[],mappings:"AAAA,+BACoB,eAAe,CAAC,uDAAuD,CAD3F,8BAC+G,YAAY,CAAC,eAAe,CAD3I,sCACuK,0CAA0C,CADjN,oCAC2O,UAAU,CADrP,oCAC+Q,YAAY,CAD3R,gCACiT,aAAa,CAD9T,wCAC4V,yCAAyC,CADrY,4CACua,aAAa",sourcesContent:[".connector{\n.dashboard__content{min-height:100%;background-color:var(--pf-global--BackgroundColor--100)}.dashboard__header{display:flex;align-items:end}.dashboard__success-status{color:var(--pf-global--success-color--100)}.dashboard__navtab-title{width:100%}.dashboard__tabs-content{display:flex}.dashboard__tabs-nav{flex-shrink:0}.dashboard__in-progress-text{color:var(--pf-global--palette--blue-500)}.dashboard__in-progress-text>svg{color:initial}\n\n}"],sourceRoot:""}]);const c=l},26020:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Se});var a=n(87757),o=n.n(a),r=n(48926),l=n.n(r),c=n(63038),s=n.n(c),i=n(97522),u=n.n(i),d=n(51981),p=n(55795),m=n(18802),f=n(86350),b=n(67336),h=n(48716),v=n(39173),g=(n(54123),n(45697)),C=n.n(g),E=(n(35892),function(e){var t=e.setMadeChanges,n=e.defaults,a=e.onChange,o=(0,i.useState)(n.hasInsights||n.useOpenSCAP||n.enableCloudConnector),r=s()(o,2),l=r[0],c=r[1],m=(0,i.useState)(n.useOpenSCAP),f=s()(m,2),b=f[0],h=f[1],v=(0,i.useState)(n.enableCloudConnector),g=s()(v,2),C=g[0],E=g[1];(0,i.useEffect)((function(){t(l!==n.hasInsights||b!==n.useOpenSCAP||C!=n.enableCloudConnector),a({useOpenSCAP:b,enableCloudConnector:C})}),[b,C,l]);var y=function(){return u().createElement(d.Popover,{"aria-label":"connected-dashboard-description",headerContent:u().createElement("div",null,"Desc header"),bodyContent:u().createElement("p",null,"Popover description"),position:"bottom"},u().createElement(d.Button,{ouiaId:"title-popover-button",variant:"plain",className:"pf-u-p-xs"},u().createElement(p.ZP,{color:"grey"})))};return u().createElement(d.Stack,{hasGutter:!0,className:"pf-u-p-md"},u().createElement(d.StackItem,null,u().createElement(d.Title,{headingLevel:"h2",size:"2xl"},"Red Hat Insights"),u().createElement(d.TextContent,{className:"pf-u-mt-md"},u().createElement(d.Text,{component:"p"},"Red Hat Insights is a proactive operational efficiency and security risk management solution in Red Hat Enterprise Linux (RHEL) subscriptions for versions 6.4 and higher, as well as public cloud versions of RHEL. It helps identify, prioritize, and resolve risks to security, compliance, performance, availability, and stability before they become urgent issues. Insights also enables users to monitor for adherence to internal policies and understand configuration changes over time."))),u().createElement(d.StackItem,null,u().createElement(d.Title,{headingLevel:"h3",size:"xl"},"Settings"),u().createElement(d.Stack,{hasGutter:!0,className:"pf-u-mt-lg"},u().createElement(d.StackItem,null,u().createElement(d.Switch,{id:"connect-to-insights",ouiaId:"connect-to-insights","aria-label":"Connect to Red Hat Insights",isChecked:l,onChange:function(){var e=!l;c((function(){return e})),e||(h((function(){return!1})),E((function(){return!1})))},label:u().createElement(i.Fragment,null,u().createElement(d.Title,{headingLevel:"h4",size:"md"},"Connect to Red Hat Insights"),u().createElement(d.TextContent,null,u().createElement(d.Text,{component:"small"},"Required to use Insights applications. Enables Advisor, Drift, Patch, Vulnerability and Policies applications.")))}),u().createElement("div",{className:"pf-u-pl-3xl"},u().createElement(d.Stack,null,u().createElement(d.StackItem,null,u().createElement(d.Switch,{className:"pf-u-mt-md",key:"use-openscap",id:"use-openscap",ouiaId:"use-openscap","aria-label":"Use OpenSCAP for Compliance policies",isChecked:b,onChange:function(){h((function(e){var t=!e;return c((function(){return!0})),t}))},label:u().createElement(i.Fragment,null,u().createElement(d.Title,{headingLevel:"h4",size:"md"},"Use OpenSCAP for Compliance policies",y()),u().createElement(d.TextContent,null,u().createElement(d.Text,{component:"small"},"Required to use Compliance application")))})),u().createElement(d.StackItem,null,u().createElement(d.Switch,{className:"pf-u-mt-md",key:"enable-cloud-connector",id:"enable-cloud-connector",ouiaId:"enable-cloud-connector","aria-label":"Enable Cloud Connector",isChecked:C,onChange:function(){E((function(e){var t=!e;return t&&c((function(){return!0})),t}))},label:u().createElement(i.Fragment,null,u().createElement(d.Title,{headingLevel:"h4",size:"md"},"Enable Cloud Connector to fix issues directly from Insights",y()),u().createElement(d.TextContent,null,u().createElement(d.Text,{component:"small"},"Cloud Connector allows you to push Remediation Ansible Playbooks directly from Insights to your systems.")))}))))))))});E.propTypes={setMadeChanges:C().func.isRequired,defaults:C().shape({useOpenSCAP:C().bool,hasInsights:C().bool,enableCloudConnector:C().bool}),onChange:C().func.isRequired},E.defaultProps={defaults:{useOpenSCAP:!1,hasInsights:!1,enableCloudConnector:!1}};const y=E;var O=function(e,t,n){return e>1?n||t+"s":t},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"".concat((new Date).toISOString()),n="data:text/plain;charset=utf-8,",a=new Blob([e],{type:n}),o=document.createElement("a");o.setAttribute("href",URL.createObjectURL(a)),o.setAttribute("download","".concat(t,".yml")),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)},P=function(e){var t=e.isOpen,n=void 0!==t&&t,a=e.handleCancel,o=e.handleConfirm,r=e.systemsCount;return u().createElement(d.Modal,{variant:"small",title:"Confirm changes",isOpen:n,onClose:a,actions:[u().createElement(d.Button,{key:"confirm",variant:"primary",type:"button",onClick:o},"Confirm changes"),u().createElement(d.Button,{key:"cancel",variant:"link",type:"button",onClick:a},"Cancel")]},u().createElement(d.TextContent,null,u().createElement(d.Text,{component:"p"},"Your changes applies to"," ",u().createElement("b",null,r," connected ",O(r,"system")),". Selected settings will also be applied to ",u().createElement("b",null,"all future systems")," ","that are connect through Red Hat Connect (rhc)."),u().createElement(d.Text,{component:"p",className:"pf-u-mb-sm"},"Upon confirmation, an Ansible Playbook will be pushed to"," ",r," ",O(r,"system")," to apply changes.")),u().createElement("a",{href:"#"},"View playbook"))};P.propTypes={isOpen:C().bool,handleConfirm:C().func.isRequired,handleCancel:C().func.isRequired,systemsCount:C().number.isRequired};const _=P;var A=n(86588),k=n(83215),w=n(67154),I=n.n(w),R=n(59713),j=n.n(R),D=n(319),T=n.n(D),x=n(83984),L=n(77460),N=new(n(91571).DefaultApi)(void 0,"/api/config-manager/v1",L.ZP),F="GET_CURR_STATE",B="SET_CURR_STATE",H="GET_LOG",G="GET_CONNECTED_HOSTS",U=function(e){return{type:B,payload:(t=e,n=t.useOpenSCAP,a=t.enableCloudConnector,o=t.hasInsights,N.updateStates({compliance_openscap:n?"enabled":"disabled",insights:n||a||o?"enabled":"disabled",remediations:a?"enabled":"disabled"}))};var t,n,a,o},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.perPage,n=void 0===t?50:t,a=e.page,o=void 0===a?1:a;return{type:H,payload:N.getStates(n,(o-1)*n)}},z=n(62410),Z=n(3197),M=n(32875),V=n(57277),Y=n(94654),J=n.n(Y),K=[{title:"Service"},{title:"State"}],Q={useOpenSCAP:"Use OpenSCAP for Compliance policies",enableCloudConnector:"Enable Cloud Connector to fix issues directly from Insights"},W=function(e){var t=e.services,n=e.isInsights;return u().createElement(d.Stack,null,u().createElement(d.StackItem,null,u().createElement(d.TextContent,null,u().createElement(d.Text,{component:d.TextVariants.h3},"State pushed to systems"))),u().createElement(x.Table,{"aria-label":"Active services Table",className:"sed-c-services__table",cells:K,rows:[{noPadding:!0,cells:["Connected to Red Hat Insighsts",n?"on":"off"]}].concat(T()(Object.entries(t).map((function(e){var t=s()(e,2),n=t[0],a=t[1];return[Q[n],"enabled"===a?"on":"off"]})))),variant:"compact"},u().createElement(x.TableHeader,null),u().createElement(x.TableBody,null)))};W.propTypes={services:C().shape({useOpenSCAP:C().bool,enableCloudConnector:C().bool}).isRequired,isInsights:C().bool.isRequired};const X=W;function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){j()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te=[{title:"Initiated date/time",cellFormatters:[x.expandable]},"Initiator",{title:"Playbook",transforms:[(0,x.cellWidth)(20)]}],ne=function(e,t){return J()(e.map((function(e,n){var a=e.account,r=e.created_at,c=e.id,s=e.state;return[{id:c,isOpen:t.includes(c),cells:[u().createElement(i.Fragment,{key:"date"},u().createElement(z.Z,{date:new Date(r),extraTitle:"Created at: "})),a,u().createElement(i.Fragment,{key:"download file-".concat(c)},u().createElement(d.Button,{variant:"link",isInline:!0,onClick:function(){l()(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.getPlaybookById(c);case 2:t=e.sent,S(t);case 4:case"end":return e.stop()}}),e)})))()}},"Download"))]},{parent:2*n,cells:[u().createElement(i.Fragment,{key:"nested-table"},u().createElement(X,{services:{useOpenSCAP:s.compliance_openscap,enableCloudConnector:s.remediations},isInsights:s.insights}))]}]})))},ae=function(e){var t=e.isOpen,n=void 0!==t&&t,a=e.onClose,o=(0,i.useState)([]),r=s()(o,2),l=r[0],c=r[1],p=(0,A.useDispatch)(),m=(0,A.useSelector)((function(e){var t=e.logReducer;return(null==t?void 0:t.loaded)||!1})),f=(0,A.useSelector)((function(e){var t=e.logReducer;return(null==t?void 0:t.results)||[]})),b=(0,A.useSelector)((function(e){var t=e.logReducer;return{itemCount:null==t?void 0:t.total,perPage:null==t?void 0:t.limit,page:Math.floor(((null==t?void 0:t.offset)||0)/((null==t?void 0:t.limit)||0))+1}}),A.shallowEqual);(0,i.useEffect)((function(){n&&p(q())}),[n]);var h=(0,i.useCallback)((function(e,t){return p(q({page:t,perPage:b.perPage}))}),[p,b.perPage]),v=(0,i.useCallback)((function(e,t){return p(q({page:1,perPage:t}))}),[p]);return u().createElement(d.Modal,{title:"Red Hat connect log",variant:"medium",isOpen:n,onClose:a},u().createElement(V.Z,{pagination:m?ee(ee({},b),{},{onSetPage:h,onPerPageSelect:v}):u().createElement(d.Skeleton,{width:"33%"})}),m?u().createElement(x.Table,{"aria-label":"Logs table",variant:x.TableVariant.compact,rows:ne(f,l),cells:te,onCollapse:function(e,t,n,a){var o=a.id;c((function(){return n?[].concat(T()(l),[o]):l.filter((function(e){return e!==o}))}))}},u().createElement(x.TableHeader,null),u().createElement(x.TableBody,null)):u().createElement(Z.Z,{colSize:3,rowSize:10}),u().createElement(M.Z,{isFooter:!0},m?u().createElement(d.Pagination,I()({},b,{variant:d.PaginationVariant.bottom,onSetPage:h,onPerPageSelect:v})):u().createElement(d.Skeleton,{width:"33%"})))};ae.propTypes={isOpen:C().bool,onClose:C().func.isRequired};const oe=ae;var re,le=n(18546);function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){j()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ie=function(e){return se(se({},e),{},{loaded:!1})},ue=function(e,t){var n,a,o,r=t.payload;return se(se({},e),{},{loaded:!0,values:{useOpenSCAP:"enabled"===(null==r||null===(n=r.state)||void 0===n?void 0:n.compliance_openscap),enableCloudConnector:"enabled"===(null==r||null===(a=r.state)||void 0===a?void 0:a.remediations),hasInsights:"enabled"===(null==r||null===(o=r.state)||void 0===o?void 0:o.insights)}})};const de=(0,le.Gg)((re={},j()(re,"".concat(B,"_PENDING"),ie),j()(re,"".concat(F,"_PENDING"),ie),j()(re,"".concat(F,"_FULFILLED"),ue),j()(re,"".concat(B,"_FULFILLED"),ue),j()(re,"".concat(F,"_ERROR"),(function(){return{error:!0}})),re),{loaded:!1,values:{}});var pe;function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){j()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const be=(0,le.Gg)((pe={},j()(pe,"".concat(H,"_PENDING"),(function(e){return fe(fe({},e),{},{loaded:!1})})),j()(pe,"".concat(H,"_FULFILLED"),(function(e,t){var n=t.payload;return fe(fe({},e),{},{loaded:!0},n||{})})),j()(pe,"".concat(H,"_ERROR"),(function(){return{error:!0}})),pe),{loaded:!1,results:[]});var he;function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){j()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ce=(0,le.Gg)((he={},j()(he,"".concat(G,"_PENDING"),(function(e){return ge(ge({},e),{},{loaded:!1})})),j()(he,"".concat(G,"_FULFILLED"),(function(e,t){var n=t.payload;return ge(ge({},e),{},{loaded:!0,hosts:(null==n?void 0:n.results)||[],total:(null==n?void 0:n.count)||0,page:(null==n?void 0:n.page)||0,perPage:(null==n?void 0:n.per_page)||0})})),j()(he,"".concat(G,"_ERROR"),(function(){return{error:!0}})),he),{loaded:!1,values:{}});var Ee=n(55399),ye=n(60306)._j,Oe=(0,i.lazy)((function(){return Promise.all([n.e(410),n.e(245)]).then(n.bind(n,56360))}));const Se=function(){var e=(0,i.useState)(!1),t=s()(e,2),n=t[0],a=t[1],r=(0,i.useState)(!1),c=s()(r,2),g=c[0],C=c[1],E=(0,i.useState)(!1),O=s()(E,2),S=O[0],P=O[1],w=(0,i.useRef)(),I=(0,A.useSelector)((function(e){var t=e.activeStateReducer;return null==t?void 0:t.loaded})),R=(0,A.useSelector)((function(e){var t,n,a,o=e.activeStateReducer;return{useOpenSCAP:null==o||null===(t=o.values)||void 0===t?void 0:t.useOpenSCAP,enableCloudConnector:null==o||null===(n=o.values)||void 0===n?void 0:n.enableCloudConnector,hasInsights:null==o||null===(a=o.values)||void 0===a?void 0:a.hasInsights}}),A.shallowEqual),j=R.useOpenSCAP,D=R.enableCloudConnector,T=R.hasInsights,x=(0,A.useSelector)((function(e){var t=e.connectedSystemsReducer;return{systemsLoaded:null==t?void 0:t.loaded,systemsCount:null==t?void 0:t.total}}),A.shallowEqual),B=x.systemsLoaded,H=x.systemsCount,q=(0,A.useDispatch)();return(0,i.useEffect)((function(){var e,t,n;null===(e=insights)||void 0===e||null===(t=e.chrome)||void 0===t||null===(n=t.appAction)||void 0===n||n.call(t,"cloud-connector-dashboard"),(0,b.JH)().register({activeStateReducer:de,logReducer:be,connectedSystemsReducer:Ce}),q({type:F,payload:N.getCurrentState()}),q({type:G,payload:L.ZP.get("".concat("/api/inventory/v1","/hosts?filter[system_profile][rhc_client_id]=not_nil&fields[system_profile]=rhc_client_id,rhc_config_state"))})}),[]),u().createElement(u().Fragment,null,u().createElement(i.Suspense,{fallback:u().createElement(d.Bullseye,null,u().createElement(d.Spinner,null))},u().createElement(Ee.Route,{exact:!0,path:ye.connectSystemsModal,component:Oe})),u().createElement(h.Z,null,u().createElement(v.Z,{title:u().createElement("div",{className:"dashboard__header"},"Red Hat Connect Dashboard ",u().createElement(d.Popover,{"aria-label":"connected-dashboard-description",headerContent:u().createElement("div",null,"Desc header"),bodyContent:u().createElement("p",null,"Popover description"),position:"bottom"},u().createElement(d.Button,{variant:"plain",className:"pf-u-p-xs"},u().createElement(p.ZP,{color:"grey"}))))})),u().createElement(f.Z,null,u().createElement("div",{className:"dashboard__content"},u().createElement(d.Stack,{className:"pf-u-p-md"},u().createElement(d.StackItem,null,u().createElement(d.Level,null,u().createElement(d.LevelItem,null,u().createElement(d.Title,{headingLevel:"h3",size:"md"},"RHEL 8 systems connected"),u().createElement(d.Flex,{alignContent:{default:"alignContentCenter"},alignItems:{default:"alignItemsCenter"}},B?u().createElement(d.Title,{headingLevel:"h3",size:"2xl"},H):u().createElement(d.Skeleton,{width:"33%"}),!I&&void 0!==j&&void 0!==D&&u().createElement(d.Text,{className:"dashboard__in-progress-text",component:"small"},u().createElement(m.ZP,null)," Changes being applied")),u().createElement(Ee.Link,{to:ye.connectSystemsModal},"Connect RHEL 6 and 7 systems")),u().createElement(d.LevelItem,null,u().createElement(d.Button,{ouiaId:"primary-save-button",isDisabled:!B||!S,onClick:function(){return a(!0)}},"Save changes"),u().createElement(d.Button,{onClick:function(){return C(!0)},variant:"link"},"View log"))))),u().createElement(d.Divider,null),I||void 0!==j&&void 0!==D?u().createElement(y,{setMadeChanges:P,defaults:{useOpenSCAP:j,enableCloudConnector:D,hasInsights:T},onChange:function(e){w.current=e}}):u().createElement(d.Bullseye,null,u().createElement(d.Spinner,{size:"xl"})))),u().createElement(_,{isOpen:n,handleCancel:function(){return a(!1)},systemsCount:H,handleConfirm:function(){a(!1),l()(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=U(w.current),q(t),e.next=4,t.payload;case 4:q((0,k.wN)({variant:"success",title:"Changes saved",description:"Your service enablement changes were applied to connected systems"})),P(!1);case 6:case"end":return e.stop()}}),e)})))()}}),u().createElement(oe,{isOpen:g,onClose:function(){return C(!1)}}))}},54123:(e,t,n)=>{"use strict";var a=n(93379),o=n.n(a),r=n(92917),l=o()(r.default,{insert:"head",singleton:!1});if(!r.default.locals||e.hot.invalidate){var c=r.default.locals;e.hot.accept(92917,(t=>{r=n(92917),function(e,t,n){if(!e&&t||e&&!t)return!1;var a;for(a in e)if(e[a]!==t[a])return!1;for(a in t)if(!e[a])return!1;return!0}(c,r.default.locals)?(c=r.default.locals,l(r.default)):e.hot.invalidate()}))}e.hot.dispose((function(){l()})),r.default.locals}}]);
//# sourceMappingURL=Dashboard.138f85e86abe3146c44b.js.map