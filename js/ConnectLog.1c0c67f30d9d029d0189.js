(self.webpackChunksed_frontend=self.webpackChunksed_frontend||[]).push([[239],{34003:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Q});var r=n(63038),a=n.n(r),o=n(97522),c=n.n(o),l=n(58740),i=n(67154),s=n.n(i),u=n(59713),p=n.n(u),f=n(319),m=n.n(f),d=n(87757),b=n.n(d),v=n(48926),g=n.n(v),h=n(26734),y=n(45697),E=n.n(y),O=n(43476),P=n(94778),S=n(62410),w=n(3197),C=n(32875),j=n(57277),T=n(94654),k=n.n(T),x=[{title:"Service"},{title:"State"}],R={useOpenSCAP:"Use OpenSCAP for Compliance policies",enableCloudConnector:"Enable Cloud Connector to fix issues directly from Insights"},_=function(e){var t=e.services,n=e.isInsights;return c().createElement(l.Stack,null,c().createElement(l.StackItem,null,c().createElement(l.TextContent,null,c().createElement(l.Text,{component:l.TextVariants.h3},"State pushed to systems"))),c().createElement(h.Table,{"aria-label":"Active services Table",className:"sed-c-services__table",cells:x,rows:[{noPadding:!0,cells:["Connected to Red Hat Insighsts",n?"on":"off"]}].concat(m()(Object.entries(t).map((function(e){var t=a()(e,2),n=t[0],r=t[1];return[R[n],"enabled"===r?"on":"off"]})))),variant:"compact"},c().createElement(h.TableHeader,null),c().createElement(h.TableBody,null)))};_.propTypes={services:E().shape({useOpenSCAP:E().bool,enableCloudConnector:E().bool}).isRequired,isInsights:E().bool.isRequired};const D=_;var I=n(1401),A=n(94962);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=[{title:"Initiated date/time",cellFormatters:[h.expandable]},"Initiator",{title:"Playbook",transforms:[(0,h.cellWidth)(20)]}],V=function(e,t){return k()(e.map((function(e,n){var r=e.account,a=e.created_at,i=e.id,s=e.state;return[{id:i,isOpen:t.includes(i),cells:[c().createElement(o.Fragment,{key:"date"},c().createElement(S.Z,{date:new Date(a),extraTitle:"Created at: "})),r,c().createElement(o.Fragment,{key:"download file-".concat(i)},c().createElement(l.Button,{variant:"link",isInline:!0,onClick:function(){g()(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.dx.getPlaybookById(i);case 2:t=e.sent,(0,I.S)(t);case 4:case"end":return e.stop()}}),e)})))()}},"Download"))]},{parent:2*n,cells:[c().createElement(o.Fragment,{key:"nested-table"},c().createElement(D,{services:{useOpenSCAP:s.compliance_openscap,enableCloudConnector:s.remediations},isInsights:s.insights}))]}]})))},H=function(){var e=(0,o.useState)([]),t=a()(e,2),n=t[0],r=t[1],i=(0,O.useDispatch)(),u=(0,O.useSelector)((function(e){var t=e.logReducer;return(null==t?void 0:t.loaded)||!1})),p=(0,O.useSelector)((function(e){var t=e.logReducer;return(null==t?void 0:t.results)||[]})),f=(0,O.useSelector)((function(e){var t=e.logReducer;return{itemCount:null==t?void 0:t.total,perPage:null==t?void 0:t.limit,page:Math.floor(((null==t?void 0:t.offset)||0)/((null==t?void 0:t.limit)||0))+1}}),O.shallowEqual);(0,o.useEffect)((function(){i((0,P.VU)())}),[]);var d=(0,o.useCallback)((function(e,t){return i((0,P.VU)({page:t,perPage:f.perPage}))}),[i,f.perPage]),b=(0,o.useCallback)((function(e,t){return i((0,P.VU)({page:1,perPage:t}))}),[i]);return c().createElement(o.Fragment,null,c().createElement(j.Z,{pagination:u?F(F({},f),{},{onSetPage:d,onPerPageSelect:b}):c().createElement(l.Skeleton,{width:"33%"})}),u?c().createElement(h.Table,{"aria-label":"Logs table",variant:h.TableVariant.compact,rows:V(p,n),cells:L,onCollapse:function(e,t,a,o){var c=o.id;r((function(){return a?[].concat(m()(n),[c]):n.filter((function(e){return e!==c}))}))}},c().createElement(h.TableHeader,null),c().createElement(h.TableBody,null)):c().createElement(w.Z,{colSize:3,rowSize:10}),c().createElement(C.Z,{isFooter:!0},u?c().createElement(l.Pagination,s()({},f,{variant:l.PaginationVariant.bottom,onSetPage:d,onPerPageSelect:b})):c().createElement(l.Skeleton,{width:"33%"})))};H.propTypes={isActive:E().bool},H.defaultProps={isActive:!1};const Z=H;var B=n(33739),q=n(30319);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const z=function(){var e=(0,o.useRef)((function(){})),t=(0,o.useContext)(q.gE).getRegistry;return c().createElement(B.Z,{variant:"compact",showTags:!0,tableProps:{canSelectAll:!1},getEntities:function(){var t=g()(b().mark((function t(n,r){var a;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.filter={system_profile:{rhc_client_id:"not_nil"}},t.next=3,e.current(void 0,r,!0);case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),onRowClick:function(e,t){return window.location.href="./insights/inventory/".concat(t)},onLoad:function(n){var r,a,o=n.mergeWithEntities,c=n.api;e.current=null==c?void 0:c.getEntities,null===(r=t())||void 0===r||null===(a=r.register)||void 0===a||a.call(r,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o()))}})};var M=n(16530),W=n(60306),N=n(83215),G=W._j,J=["runs","systems"];const Q=function(){var e=(0,o.useState)(0),t=a()(e,2),n=t[0],r=t[1],i=(0,O.useDispatch)(),s=(0,M.useHistory)(),u=s.push,p=s.location;return(0,o.useEffect)((function(){i((0,N.L1)());var e=new URLSearchParams(p.search),t=J.findIndex((function(t){return t===e.get("active_tab")}));-1!==t?r(t):u({pathname:p.pathname,search:new URLSearchParams({active_tab:J[0]}).toString()})}),[]),c().createElement(l.Modal,{title:"Red Hat connect log",variant:"medium",isOpen:!0,onClose:function(){return u(G.connector)}},c().createElement(l.Tabs,{activeKey:n,onSelect:function(e,t){u({pathname:p.pathname,search:new URLSearchParams({active_tab:J[t]}).toString()}),r(t)}},c().createElement(l.Tab,{eventKey:0,title:c().createElement(l.TabTitleText,null,"Runs")},c().createElement(Z,null)),c().createElement(l.Tab,{eventKey:1,title:c().createElement(l.TabTitleText,null,"Systems")},c().createElement(z,null))))}}}]);