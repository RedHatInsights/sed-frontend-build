"use strict";(self.webpackChunksed_frontend=self.webpackChunksed_frontend||[]).push([[612],{73945:(e,n,t)=>{t.d(n,{Z:()=>I});var r=t(97522),i=t.n(r),o=t(16530),c=t(76430),a=t(4147),s=t(88767),u=t(63038),l=t.n(u),d=t(87757),m=t.n(d),f=t(48926),v=t.n(f),h=function(){var e=v()(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve(window.insights.chrome.getUserPermissions("config-manager")).then((function(e){var n=e.map((function(e){return e.permission}));return{canReadActivationKeys:n.includes("config-manager:activation_keys:read")||n.includes("config-manager:activation_keys:*")}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){try{return window.insights.chrome.auth.getUser()}catch(e){throw new Error("Error authenticating user: ".concat(e.message))}},y=t(28455),p=t(15984);const E=function(e){var n,t,c=e.children,a=(0,s.useQueryClient)(),u=(0,o.useLocation)(),d=(0,s.useQuery)("user",(function(){return Promise.all([g(),h()]).then((function(e){var n,t,r=l()(e,2),i=r[0],o=r[1];return{accountNumber:i.identity.account_number,orgId:null==i||null===(n=i.identity)||void 0===n||null===(t=n.internal)||void 0===t?void 0:t.org_id,rbacPermissions:o}}))})),m=d.isLoading,f=d.isFetching,v=d.isSuccess,E=d.isError;return(0,r.useEffect)((function(){a.invalidateQueries("user")}),[u.pathname]),v&&(null===(n=window.insights)||void 0===n||null===(t=n.chrome)||void 0===t||t.hideGlobalFilter()),!0===E?i().createElement(p.Z,null):!0===m||!0===f?i().createElement(y.Z,null):!0===v?i().createElement(i().Fragment,null,c):void 0};var w=a._j,k=(0,r.lazy)((function(){return Promise.all([t.e(410),t.e(252),t.e(736),t.e(529),t.e(362)]).then(t.bind(t,96132))})),P=(0,r.lazy)((function(){return Promise.all([t.e(410),t.e(252),t.e(736),t.e(529),t.e(157)]).then(t.bind(t,32157))})),b=function(){return i().createElement(r.Suspense,{fallback:i().createElement(c.Bullseye,null,i().createElement(c.Spinner,null))},i().createElement(E,null,i().createElement(o.Switch,null,i().createElement(o.Route,{path:w.activationKeys,component:P}),i().createElement(o.Route,{path:w.connector,component:k}))))},C=t(24685),_=t(83215),S=t(30319),A=new s.QueryClient({defaultOptions:{queries:{retry:3,retryDelay:1e4,staleTime:1/0,refetchOnWindowFocus:!1,refetchOnMount:!1}}});const I=function(){var e=(0,r.useContext)(S.gE).getRegistry,n=(0,o.useHistory)();(0,r.useEffect)((function(){e().register({notifications:_.ee})}),[e]);var t=(0,r.useMemo)((function(){return{settings:function(e){var n,t;null===(n=insights)||void 0===n||null===(t=n.chrome)||void 0===t||t.appNavClick({id:"settings",redirect:e})},activationKeys:function(e){var n,t;null===(n=insights)||void 0===n||null===(t=n.chrome)||void 0===t||t.appNavClick({id:"activationKeys",redirect:e})}}}),[]);return(0,r.useEffect)((function(){insights.chrome.init(),insights.chrome.identifyApp("connector");var e=insights.chrome.on("APP_NAVIGATION",(function(e){e.domEvent&&(n.push("/".concat(e.navId)),void 0!==t[e.navId]?t[e.navId](!0):t.settings(!0))}));return function(){return e()}}),[]),i().createElement(s.QueryClientProvider,{client:A},i().createElement(C.ZP,null),i().createElement(b,null))}},28455:(e,n,t)=>{t.d(n,{Z:()=>c});var r=t(97522),i=t.n(r),o=t(76430);const c=function(){return i().createElement(o.Bullseye,null,i().createElement(o.Spinner,null))}},30319:(e,n,t)=>{t.d(n,{gE:()=>s,S1:()=>u});var r=t(97522),i=t(67336),o=t(68573),c=t.n(o),a=t(84885),s=(0,r.createContext)({getRegistry:function(){}});function u(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return(0,i.JH)({},[c(),(0,a.ZP)({errorDescriptionKey:["detail","stack"]})].concat(n))}},4147:e=>{e.exports=JSON.parse('{"_j":{"connector":"/","connectSystemsModal":"/connect-systems","logModal":"/log","activationKeys":"/activation-keys"}}')}}]);
//# sourceMappingURL=../sourcemaps/612.b3a07134274978df922750de7df16cad.js.map